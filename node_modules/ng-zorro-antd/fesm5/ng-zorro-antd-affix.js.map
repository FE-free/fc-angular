{"version":3,"file":"ng-zorro-antd-affix.js","sources":["ng://ng-zorro-antd/affix/nz-affix.component.ts","ng://ng-zorro-antd/affix/nz-affix.module.ts"],"sourcesContent":["/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Platform } from '@angular/cdk/platform';\nimport { DOCUMENT } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {\n  shallowEqual,\n  throttleByAnimationFrameDecorator,\n  toNumber,\n  NgStyleInterface,\n  NzScrollService\n} from 'ng-zorro-antd/core';\n\n@Component({\n  selector: 'nz-affix',\n  exportAs: 'nzAffix',\n  templateUrl: './nz-affix.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styles: [\n    `\n      nz-affix {\n        display: block;\n      }\n    `\n  ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class NzAffixComponent implements OnInit, OnDestroy {\n  @Input()\n  set nzTarget(value: string | Element | Window) {\n    if (this.platform.isBrowser) {\n      this.clearEventListeners();\n      this._target = typeof value === 'string' ? this.doc.querySelector(value) : value || window;\n      this.setTargetEventListeners();\n      this.updatePosition({} as Event);\n    }\n  }\n\n  @Input()\n  set nzOffsetTop(value: number | null) {\n    if (value === undefined || value === null) {\n      return;\n    }\n    this._offsetTop = toNumber(value, null);\n    this.updatePosition({} as Event);\n  }\n\n  get nzOffsetTop(): number | null {\n    return this._offsetTop;\n  }\n\n  @Input()\n  set nzOffsetBottom(value: number) {\n    if (typeof value === 'undefined') {\n      return;\n    }\n    this._offsetBottom = toNumber(value, null);\n    this.updatePosition({} as Event);\n  }\n\n  @Output() readonly nzChange = new EventEmitter<boolean>();\n\n  private timeout: number;\n  private readonly events = ['resize', 'scroll', 'touchstart', 'touchmove', 'touchend', 'pageshow', 'load'];\n  @ViewChild('fixedEl', { static: false }) private fixedEl: ElementRef;\n\n  private readonly placeholderNode: HTMLElement;\n\n  private affixStyle: NgStyleInterface | undefined;\n  private placeholderStyle: NgStyleInterface | undefined;\n  private _target: Element | Window | null = null;\n  private _offsetTop: number | null;\n  private _offsetBottom: number | null;\n\n  constructor(\n    _el: ElementRef,\n    private scrollSrv: NzScrollService,\n    // tslint:disable-next-line:no-any\n    @Inject(DOCUMENT) private doc: any,\n    private platform: Platform\n  ) {\n    this.placeholderNode = _el.nativeElement;\n    if (this.platform.isBrowser) {\n      this._target = window;\n    }\n  }\n\n  ngOnInit(): void {\n    this.timeout = setTimeout(() => {\n      this.setTargetEventListeners();\n      this.updatePosition({} as Event);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.clearEventListeners();\n    clearTimeout(this.timeout);\n    // tslint:disable-next-line:no-any\n    (this.updatePosition as any).cancel();\n  }\n\n  getOffset(\n    element: Element,\n    target: Element | Window | undefined\n  ): {\n    top: number;\n    left: number;\n    width: number;\n    height: number;\n  } {\n    const elemRect = element.getBoundingClientRect();\n    const targetRect = this.getTargetRect(target);\n\n    const scrollTop = this.scrollSrv.getScroll(target, true);\n    const scrollLeft = this.scrollSrv.getScroll(target, false);\n\n    const docElem = this.doc.body;\n    const clientTop = docElem.clientTop || 0;\n    const clientLeft = docElem.clientLeft || 0;\n\n    return {\n      top: elemRect.top - targetRect.top + scrollTop - clientTop,\n      left: elemRect.left - targetRect.left + scrollLeft - clientLeft,\n      width: elemRect.width,\n      height: elemRect.height\n    };\n  }\n\n  private setTargetEventListeners(): void {\n    this.clearEventListeners();\n    if (this.platform.isBrowser) {\n      this.events.forEach((eventName: string) => {\n        this._target!.addEventListener(eventName, this.updatePosition, false);\n      });\n    }\n  }\n\n  private clearEventListeners(): void {\n    if (this.platform.isBrowser) {\n      this.events.forEach(eventName => {\n        this._target!.removeEventListener(eventName, this.updatePosition, false);\n      });\n    }\n  }\n\n  private getTargetRect(target: Element | Window | undefined): ClientRect {\n    return target !== window\n      ? (target as HTMLElement).getBoundingClientRect()\n      : ({ top: 0, left: 0, bottom: 0 } as ClientRect);\n  }\n\n  private genStyle(affixStyle?: NgStyleInterface): string {\n    if (!affixStyle) {\n      return '';\n    }\n    return Object.keys(affixStyle)\n      .map(key => {\n        const val = affixStyle[key];\n        return `${key}:${typeof val === 'string' ? val : val + 'px'}`;\n      })\n      .join(';');\n  }\n\n  private setAffixStyle(e: Event, affixStyle?: NgStyleInterface): void {\n    const originalAffixStyle = this.affixStyle;\n    const isWindow = this._target === window;\n    if (e.type === 'scroll' && originalAffixStyle && affixStyle && isWindow) {\n      return;\n    }\n    if (shallowEqual(originalAffixStyle, affixStyle)) {\n      return;\n    }\n\n    const fixed = !!affixStyle;\n    const wrapEl = this.fixedEl.nativeElement as HTMLElement;\n    wrapEl.style.cssText = this.genStyle(affixStyle);\n    this.affixStyle = affixStyle;\n    const cls = 'ant-affix';\n    if (fixed) {\n      wrapEl.classList.add(cls);\n    } else {\n      wrapEl.classList.remove(cls);\n    }\n\n    if ((affixStyle && !originalAffixStyle) || (!affixStyle && originalAffixStyle)) {\n      this.nzChange.emit(fixed);\n    }\n  }\n\n  private setPlaceholderStyle(placeholderStyle?: NgStyleInterface): void {\n    const originalPlaceholderStyle = this.placeholderStyle;\n    if (shallowEqual(placeholderStyle, originalPlaceholderStyle)) {\n      return;\n    }\n    this.placeholderNode.style.cssText = this.genStyle(placeholderStyle);\n    this.placeholderStyle = placeholderStyle;\n  }\n\n  private syncPlaceholderStyle(e: Event): void {\n    if (!this.affixStyle) {\n      return;\n    }\n    this.placeholderNode.style.cssText = '';\n    this.placeholderStyle = undefined;\n    const styleObj = { width: this.placeholderNode.offsetWidth, height: this.fixedEl.nativeElement.offsetHeight };\n    this.setAffixStyle(e, {\n      ...this.affixStyle,\n      ...styleObj\n    });\n    this.setPlaceholderStyle(styleObj);\n  }\n\n  @throttleByAnimationFrameDecorator()\n  updatePosition(e: Event): void {\n    if (!this.platform.isBrowser) {\n      return;\n    }\n    const targetNode = this._target as (HTMLElement | Window);\n    // Backwards support\n    let offsetTop = this.nzOffsetTop;\n    const scrollTop = this.scrollSrv.getScroll(targetNode!, true);\n    const elemOffset = this.getOffset(this.placeholderNode, targetNode!);\n    const fixedNode = this.fixedEl.nativeElement as HTMLElement;\n    const elemSize = {\n      width: fixedNode.offsetWidth,\n      height: fixedNode.offsetHeight\n    };\n    const offsetMode = {\n      top: false,\n      bottom: false\n    };\n    // Default to `offsetTop=0`.\n    if (typeof offsetTop !== 'number' && typeof this._offsetBottom !== 'number') {\n      offsetMode.top = true;\n      offsetTop = 0;\n    } else {\n      offsetMode.top = typeof offsetTop === 'number';\n      offsetMode.bottom = typeof this._offsetBottom === 'number';\n    }\n    const targetRect = this.getTargetRect(targetNode as Window);\n    const targetInnerHeight = (targetNode as Window).innerHeight || (targetNode as HTMLElement).clientHeight;\n    if (scrollTop >= elemOffset.top - (offsetTop as number) && offsetMode.top) {\n      const width = elemOffset.width;\n      const top = targetRect.top + (offsetTop as number);\n      this.setAffixStyle(e, {\n        position: 'fixed',\n        top,\n        left: targetRect.left + elemOffset.left,\n        maxHeight: `calc(100vh - ${top}px)`,\n        width\n      });\n      this.setPlaceholderStyle({\n        width,\n        height: elemSize.height\n      });\n    } else if (\n      scrollTop <= elemOffset.top + elemSize.height + (this._offsetBottom as number) - targetInnerHeight &&\n      offsetMode.bottom\n    ) {\n      const targetBottomOffet = targetNode === window ? 0 : window.innerHeight - targetRect.bottom;\n      const width = elemOffset.width;\n      this.setAffixStyle(e, {\n        position: 'fixed',\n        bottom: targetBottomOffet + (this._offsetBottom as number),\n        left: targetRect.left + elemOffset.left,\n        width\n      });\n      this.setPlaceholderStyle({\n        width,\n        height: elemOffset.height\n      });\n    } else {\n      if (\n        e.type === 'resize' &&\n        this.affixStyle &&\n        this.affixStyle.position === 'fixed' &&\n        this.placeholderNode.offsetWidth\n      ) {\n        this.setAffixStyle(e, { ...this.affixStyle, width: this.placeholderNode.offsetWidth });\n      } else {\n        this.setAffixStyle(e);\n      }\n      this.setPlaceholderStyle();\n    }\n\n    if (e.type === 'resize') {\n      this.syncPlaceholderStyle(e);\n    }\n  }\n}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { SCROLL_SERVICE_PROVIDER } from 'ng-zorro-antd/core';\n\nimport { NzAffixComponent } from './nz-affix.component';\n\n@NgModule({\n  declarations: [NzAffixComponent],\n  exports: [NzAffixComponent],\n  imports: [CommonModule],\n  providers: [SCROLL_SERVICE_PROVIDER]\n})\nexport class NzAffixModule {}\n"],"names":["tslib_1.__decorate"],"mappings":"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"}