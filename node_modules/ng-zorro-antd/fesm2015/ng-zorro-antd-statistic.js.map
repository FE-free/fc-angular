{"version":3,"file":"ng-zorro-antd-statistic.js","sources":["ng://ng-zorro-antd/statistic/nz-statistic-definitions.ts","ng://ng-zorro-antd/statistic/nz-statistic.component.ts","ng://ng-zorro-antd/statistic/nz-countdown.component.ts","ng://ng-zorro-antd/statistic/nz-statistic-number.component.ts","ng://ng-zorro-antd/statistic/nz-time-range.pipe.ts","ng://ng-zorro-antd/statistic/nz-statistic.module.ts"],"sourcesContent":["/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nexport type NzStatisticValueType = number | string;\n\nexport const REFRESH_INTERVAL = 1000 / 30;\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { ChangeDetectionStrategy, Component, Input, TemplateRef, ViewEncapsulation } from '@angular/core';\nimport { NzStatisticValueType } from './nz-statistic-definitions';\n\n@Component({\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  selector: 'nz-statistic',\n  exportAs: 'nzStatistic',\n  templateUrl: './nz-statistic.component.html',\n  host: {\n    class: 'ant-statistic'\n  },\n  styles: ['nz-statistic { display: block; }']\n})\nexport class NzStatisticComponent {\n  @Input() nzPrefix: string | TemplateRef<void>;\n  @Input() nzSuffix: string | TemplateRef<void>;\n  @Input() nzTitle: string | TemplateRef<void>;\n  @Input() nzValue: NzStatisticValueType;\n  @Input() nzValueStyle = {};\n  @Input() nzValueTemplate: TemplateRef<{ $implicit: NzStatisticValueType }>;\n}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Platform } from '@angular/cdk/platform';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  SimpleChanges,\n  ViewEncapsulation\n} from '@angular/core';\nimport { interval, Subscription } from 'rxjs';\n\nimport { REFRESH_INTERVAL } from './nz-statistic-definitions';\nimport { NzStatisticComponent } from './nz-statistic.component';\n\n@Component({\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  selector: 'nz-countdown',\n  exportAs: 'nzCountdown',\n  templateUrl: './nz-countdown.component.html'\n})\nexport class NzCountdownComponent extends NzStatisticComponent implements OnInit, OnChanges, OnDestroy {\n  /** @override */\n  @Input() nzFormat: string = 'HH:mm:ss';\n\n  diff: number;\n\n  private target: number;\n  private updater_: Subscription | null;\n\n  constructor(private cdr: ChangeDetectorRef, private ngZone: NgZone, private platform: Platform) {\n    super();\n  }\n\n  /** @override */\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.nzValue) {\n      this.target = Number(changes.nzValue.currentValue);\n      if (!changes.nzValue.isFirstChange()) {\n        this.syncTimer();\n      }\n    }\n  }\n\n  ngOnInit(): void {\n    this.syncTimer();\n  }\n\n  ngOnDestroy(): void {\n    this.stopTimer();\n  }\n\n  syncTimer(): void {\n    if (this.target >= Date.now()) {\n      this.startTimer();\n    } else {\n      this.stopTimer();\n    }\n  }\n\n  startTimer(): void {\n    if (this.platform.isBrowser) {\n      this.ngZone.runOutsideAngular(() => {\n        this.stopTimer();\n        this.updater_ = interval(REFRESH_INTERVAL).subscribe(() => {\n          this.updateValue();\n          this.cdr.detectChanges();\n        });\n      });\n    }\n  }\n\n  stopTimer(): void {\n    if (this.updater_) {\n      this.updater_.unsubscribe();\n      this.updater_ = null;\n    }\n  }\n\n  /**\n   * Update time that should be displayed on the screen.\n   */\n  protected updateValue(): void {\n    this.diff = Math.max(this.target - Date.now(), 0);\n\n    if (this.diff === 0) {\n      this.stopTimer();\n    }\n  }\n}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { getLocaleNumberSymbol, NumberSymbol } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  Inject,\n  Input,\n  LOCALE_ID,\n  OnChanges,\n  TemplateRef,\n  ViewEncapsulation\n} from '@angular/core';\nimport { NzStatisticValueType } from './nz-statistic-definitions';\n\n@Component({\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  preserveWhitespaces: false,\n  selector: 'nz-statistic-number',\n  exportAs: 'nzStatisticNumber',\n  templateUrl: './nz-statistic-number.component.html',\n  host: {\n    class: 'ant-statistic-content-value'\n  },\n  styles: ['nz-number { display: inline }']\n})\nexport class NzStatisticNumberComponent implements OnChanges {\n  @Input() nzValue: NzStatisticValueType;\n  @Input() nzValueTemplate: TemplateRef<{ $implicit: NzStatisticValueType }>;\n\n  displayInt = '';\n  displayDecimal = '';\n\n  constructor(@Inject(LOCALE_ID) private locale_id: string) {}\n\n  ngOnChanges(): void {\n    this.formatNumber();\n  }\n\n  private formatNumber(): void {\n    const decimalSeparator: string =\n      typeof this.nzValue === 'number' ? '.' : getLocaleNumberSymbol(this.locale_id, NumberSymbol.Decimal);\n    const value = String(this.nzValue);\n    const [int, decimal] = value.split(decimalSeparator);\n\n    this.displayInt = int;\n    this.displayDecimal = decimal ? `${decimalSeparator}${decimal}` : '';\n  }\n}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { padStart, timeUnits } from 'ng-zorro-antd/core';\n\n@Pipe({\n  name: 'nzTimeRange',\n  pure: true\n})\nexport class NzTimeRangePipe implements PipeTransform {\n  transform(value: string | number, format: string = 'HH:mm:ss'): string {\n    let duration = Number(value || 0);\n\n    return timeUnits.reduce((current, [name, unit]) => {\n      if (current.indexOf(name) !== -1) {\n        const v = Math.floor(duration / unit);\n        duration -= v * unit;\n        return current.replace(new RegExp(`${name}+`, 'g'), (match: string) => {\n          return padStart(v.toString(), match.length, '0');\n        });\n      }\n      return current;\n    }, format);\n  }\n}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NzAddOnModule } from 'ng-zorro-antd/core';\nimport { NzCountdownComponent } from './nz-countdown.component';\nimport { NzStatisticNumberComponent } from './nz-statistic-number.component';\nimport { NzStatisticComponent } from './nz-statistic.component';\nimport { NzTimeRangePipe } from './nz-time-range.pipe';\n\n@NgModule({\n  imports: [CommonModule, NzAddOnModule],\n  declarations: [NzStatisticComponent, NzCountdownComponent, NzStatisticNumberComponent, NzTimeRangePipe],\n  exports: [NzStatisticComponent, NzCountdownComponent, NzStatisticNumberComponent, NzTimeRangePipe]\n})\nexport class NzStatisticModule {}\n"],"names":[],"mappings":"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"}