{"version":3,"file":"ng-zorro-antd-pagination.js","sources":["ng://ng-zorro-antd/pagination/nz-pagination.component.ts","ng://ng-zorro-antd/pagination/nz-pagination.module.ts"],"sourcesContent":["/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { isInteger, toNumber, InputBoolean, InputNumber } from 'ng-zorro-antd/core';\nimport { NzI18nService } from 'ng-zorro-antd/i18n';\n\n@Component({\n  selector: 'nz-pagination',\n  exportAs: 'nzPagination',\n  preserveWhitespaces: false,\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  templateUrl: './nz-pagination.component.html'\n})\nexport class NzPaginationComponent implements OnInit, OnDestroy, OnChanges {\n  // tslint:disable-next-line:no-any\n  locale: any = {};\n  firstIndex = 1;\n  pages: number[] = [];\n  private $destroy = new Subject<void>();\n  @Output() readonly nzPageSizeChange: EventEmitter<number> = new EventEmitter();\n  @Output() readonly nzPageIndexChange: EventEmitter<number> = new EventEmitter();\n  @Input() nzShowTotal: TemplateRef<{ $implicit: number; range: [number, number] }>;\n  @Input() nzInTable = false;\n  @Input() nzSize: 'default' | 'small' = 'default';\n  @Input() nzPageSizeOptions = [10, 20, 30, 40];\n  @Input() @ViewChild('renderItemTemplate', { static: true }) nzItemRender: TemplateRef<{\n    $implicit: 'page' | 'prev' | 'next';\n    page: number;\n  }>;\n  @Input() @InputBoolean() nzDisabled = false;\n  @Input() @InputBoolean() nzShowSizeChanger = false;\n  @Input() @InputBoolean() nzHideOnSinglePage = false;\n  @Input() @InputBoolean() nzShowQuickJumper = false;\n  @Input() @InputBoolean() nzSimple = false;\n  @Input() @InputNumber() nzTotal = 0;\n  @Input() @InputNumber() nzPageIndex = 1;\n  @Input() @InputNumber() nzPageSize = 10;\n\n  validatePageIndex(value: number): number {\n    if (value > this.lastIndex) {\n      return this.lastIndex;\n    } else if (value < this.firstIndex) {\n      return this.firstIndex;\n    } else {\n      return value;\n    }\n  }\n\n  updatePageIndexValue(page: number): void {\n    this.nzPageIndex = page;\n    this.nzPageIndexChange.emit(this.nzPageIndex);\n    this.buildIndexes();\n  }\n\n  isPageIndexValid(value: number): boolean {\n    return this.validatePageIndex(value) === value;\n  }\n\n  jumpPage(index: number): void {\n    if (index !== this.nzPageIndex && !this.nzDisabled) {\n      const pageIndex = this.validatePageIndex(index);\n      if (pageIndex !== this.nzPageIndex) {\n        this.updatePageIndexValue(pageIndex);\n      }\n    }\n  }\n\n  jumpDiff(diff: number): void {\n    this.jumpPage(this.nzPageIndex + diff);\n  }\n\n  onPageSizeChange($event: number): void {\n    this.nzPageSize = $event;\n    this.nzPageSizeChange.emit($event);\n    this.buildIndexes();\n    if (this.nzPageIndex > this.lastIndex) {\n      this.updatePageIndexValue(this.lastIndex);\n    }\n  }\n\n  handleKeyDown(_: KeyboardEvent, input: HTMLInputElement, clearInputValue: boolean): void {\n    const target = input;\n    const page = toNumber(target.value, this.nzPageIndex);\n    if (isInteger(page) && this.isPageIndexValid(page) && page !== this.nzPageIndex) {\n      this.updatePageIndexValue(page);\n    }\n    if (clearInputValue) {\n      target.value = '';\n    } else {\n      target.value = `${this.nzPageIndex}`;\n    }\n  }\n\n  /** generate indexes list */\n  buildIndexes(): void {\n    const pages: number[] = [];\n    if (this.lastIndex <= 9) {\n      for (let i = 2; i <= this.lastIndex - 1; i++) {\n        pages.push(i);\n      }\n    } else {\n      const current = +this.nzPageIndex;\n      let left = Math.max(2, current - 2);\n      let right = Math.min(current + 2, this.lastIndex - 1);\n      if (current - 1 <= 2) {\n        right = 5;\n      }\n      if (this.lastIndex - current <= 2) {\n        left = this.lastIndex - 4;\n      }\n      for (let i = left; i <= right; i++) {\n        pages.push(i);\n      }\n    }\n    this.pages = pages;\n    this.cdr.markForCheck();\n  }\n\n  get lastIndex(): number {\n    return Math.ceil(this.nzTotal / this.nzPageSize);\n  }\n\n  get isLastIndex(): boolean {\n    return this.nzPageIndex === this.lastIndex;\n  }\n\n  get isFirstIndex(): boolean {\n    return this.nzPageIndex === this.firstIndex;\n  }\n\n  get ranges(): number[] {\n    return [(this.nzPageIndex - 1) * this.nzPageSize + 1, Math.min(this.nzPageIndex * this.nzPageSize, this.nzTotal)];\n  }\n\n  get showAddOption(): boolean {\n    return this.nzPageSizeOptions.indexOf(this.nzPageSize) === -1;\n  }\n\n  constructor(private i18n: NzI18nService, private cdr: ChangeDetectorRef) {}\n\n  ngOnInit(): void {\n    this.i18n.localeChange.pipe(takeUntil(this.$destroy)).subscribe(() => {\n      this.locale = this.i18n.getLocaleData('Pagination');\n      this.cdr.markForCheck();\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.$destroy.next();\n    this.$destroy.complete();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.nzTotal || changes.nzPageSize || changes.nzPageIndex) {\n      this.buildIndexes();\n    }\n  }\n}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nimport { NzI18nModule } from 'ng-zorro-antd/i18n';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\n\nimport { NzPaginationComponent } from './nz-pagination.component';\n\n@NgModule({\n  declarations: [NzPaginationComponent],\n  exports: [NzPaginationComponent],\n  imports: [CommonModule, FormsModule, NzSelectModule, NzI18nModule, NzIconModule]\n})\nexport class NzPaginationModule {}\n"],"names":["tslib_1.__decorate"],"mappings":"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"}